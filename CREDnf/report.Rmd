---
title: "NF/BCI Instructions Checklist"
date: "`r format(Sys.time(), '%d %B, %Y')`"
output: pdf_document
classoption: landscape
geometry: margin=2cm
header-includes:
- \usepackage{fancyhdr}
- \usepackage{longtable}
- \usepackage{array}
- \fancyhf{}
- \renewcommand{\headrulewidth}{0pt}
- \fancyfoot[C]{\itshape{This report has been generated using the CRED-nf online checklist version 1.0, adapted from the CRED-nf manuscript which is freely available here https://doi.org/10.1093/brain/awaa009.}}
- \fancyhead[R]{\thepage}
- \pagestyle{fancy}
- \fancypagestyle{plain}{\pagestyle{fancy}}
params:
  title: NA
  author: NA
  email: NA
  domains: NA
  checkIDs: NA
  checkItem: NA
  response: NA
  ticks: NA
  boilers: NA
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
library(kableExtra)
library(knitr)
library(dplyr)
escapestr <- function(x) {
  x <- gsub("\\,", "\\\\,", x)
  x <- gsub("\\.", "\\\\.", x)
  x <- gsub("\\(", "\\\\(", x)
  x <- gsub("\\)", "\\\\)", x)
  x <- gsub("\\/", "\\\\/", x)
  x <- gsub("\\?", "\\\\?", x)
  x <- gsub("\\-", "\\\\-", x)
  x <- gsub("\\:", "\\\\:", x)
  
  return(x)
}
```

```{r, echo=FALSE}
table.df <- data.frame("Item.num" = params$checkIDs, "Checklist item" = params$checkItem, "Instructions type" = params$ticks, "Manuscript details"=params$response) # Create a table

```


```{r}
escboil <- escapestr(params$response)
# Check for matches with boilerplate
boilmatch <- as.logical(sapply(escboil, function(x) {any(grepl(x, params$boilers))}))
```


**Manuscript title:** `r params$title`  
**Corresponding Author:** `r params$author`  
**Corresponding author email:** `r params$email`  
&nbsp;

**domains:** `r params$domains`  
**checkIDs:** `r params$checkIDs`  
**checkItem:** `r params$checkItem`  
**ticks:** `r params$ticks`  
**response:** `r params$response`  



\renewcommand{\arraystretch}{1.5}
```{r}
hdr <- c("Item No.", "Checklist item", "Instructions type", "Manuscript Details")

table.df %>%
  mutate(Manuscript.details = cell_spec(Manuscript.details, italic=boilmatch)) %>%
  select(Item.num, Checklist.item, Instructions.type, Manuscript.details) %>%
  kable(table.df, format="latex", longtable=TRUE, escape=FALSE, col.names=hdr) %>%
  kable_styling(latex_options = c("hold_position"), full_width = FALSE) %>%
  row_spec(0, bold=TRUE, font_size = 12) %>%
  column_spec(1, border_right=TRUE) %>%
  column_spec(2, border_right=TRUE, width="20em") %>%
  column_spec(3, width="10em") %>%
  column_spec(4, width="30em")
# %>%
# GRRRRRRRRRRRRRRRRRRRR
#  pack_rows("Recruitment phase", hline_after = TRUE, 1) %>%
#  pack_rows("Beginning of the first NF/BCI training session", 2, hline_after = TRUE) %>%
#  pack_rows("Beginning of each NF/BCI session", 3, hline_before = TRUE) %>%
#  pack_rows("During NF/BCI sessions", 4) %>%
#  pack_rows("End of the last NF/BCI session", 5) %>%
#  pack_rows("Additional phase", 6)

```